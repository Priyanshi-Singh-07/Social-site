(this["webpackJsonpcodeial-react-app"]=this["webpackJsonpcodeial-react-app"]||[]).push([[0],{10:function(e,t,n){e.exports={loginSignupHeader:"login_loginSignupHeader__3_hyw",loginForm:"login_loginForm__1cGU2",field:"login_field__3Ar76"}},17:function(e,t,n){e.exports={nav:"navbar_nav__w9qqm",logo:"navbar_logo__2HpMx",logoIcons:"navbar_logoIcons__3WoyM",userDp:"navbar_userDp__3lEPf",user:"navbar_user__29J2n",rightNav:"navbar_rightNav__1iXq8",navLinks:"navbar_navLinks__3r2ae",searchContainer:"navbar_searchContainer__3FlI5",searchIcon:"navbar_searchIcon__2ZQwF",searchResults:"navbar_searchResults__RfxEm",searchResultsRow:"navbar_searchResultsRow__39bN7"}},46:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),c=n(15),r=n.n(c),o=n(18),i=(n(46),n(16)),l=n(5),u=n(7),j=n.n(u),d=n(13),m=n(4),p=n(29),b=n(1),h={user:null,login:function(){},logout:function(){},loading:!0,signup:function(){}},O=Object(s.createContext)(h),f=function(e){var t=e.children,n=T();return Object(b.jsx)(O.Provider,{value:n,children:t})},x=n(19),v=n(32),g="http://codeial.codingninjas.com:8000/api/v2/",_=function(){return"".concat(g,"/users/login")},C=function(){return"".concat(g,"/users/signup")},N=function(e,t){return"".concat(g,"/posts?page=").concat(e,"&limit=").concat(t)},w="__codeial_token__",S=function(e,t){if(!e||!t)return console.error("Can not store in LS");var n="string"!==typeof t?JSON.stringify(t):t;localStorage.setItem(e,n)},k=function(e){var t=[];for(var n in e){var s=encodeURIComponent(n),a=encodeURIComponent(e[n]);t.push(s+"="+a)}return t.join("&")},L=["body"],y=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var s,a,c,r,o,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.body,a=Object(v.a)(n,L),c=window.localStorage.getItem(w),r={"content-type":"application/x-www-form-urlencoded"},c&&(r.Authorization="Bearer ".concat(c)),o=Object(x.a)(Object(x.a)({},a),{},{headers:Object(x.a)(Object(x.a)({},r),a.headers)}),s&&(o.body=k(s)),e.prev=6,e.next=9,fetch(t,o);case 9:return i=e.sent,e.next=12,i.json();case 12:if(!(l=e.sent).success){e.next=15;break}return e.abrupt("return",{data:l.data,success:!0});case 15:throw new Error(l.message);case 18:return e.prev=18,e.t0=e.catch(6),console.error("error"),e.abrupt("return",{message:e.t0.message,success:!1});case 22:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return y(N(e,t),{method:"GET"})},B=function(e,t){return y(_(),{method:"POST",body:{email:e,password:t}})},A=function(){var e=Object(d.a)(j.a.mark((function e(t,n,s,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y(C(),{method:"POST",body:{name:t,email:n,password:s,confirm_password:a}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,s,a){return e.apply(this,arguments)}}(),P=function(){return Object(s.useContext)(O)},T=function(){var e=Object(s.useState)(null),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!0),r=Object(m.a)(c,2),o=r[0],i=r[1];Object(s.useEffect)((function(){var e,t=(e=w)?localStorage.getItem(e):console.error("Can get the value from LS");if(t){var n=Object(p.a)(t);a(n)}i(!1)}),[]);var l=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t,n);case 2:if(!(s=e.sent).success){e.next=9;break}return a(s.data.user),S(w,s.data.token?s.data.token:null),e.abrupt("return",{success:!0});case 9:return e.abrupt("return",{success:!1,message:s.message});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(d.a)(j.a.mark((function e(t,n,s,a){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,n,s,a);case 2:if(!(c=e.sent).success){e.next=7;break}return e.abrupt("return",{success:!0});case 7:return e.abrupt("return",{success:!1,message:c.message});case 8:case"end":return e.stop()}}),e)})));return function(t,n,s,a){return e.apply(this,arguments)}}();return{user:n,login:l,logout:function(){a(null),function(e){if(!e)return console.error("Can get the value from LS");localStorage.removeItem(e)}(w)},loading:o,signup:u}},D=n(6),E=n.n(D),H=function(){var e=Object(s.useState)([]),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)([]),r=Object(m.a)(c,2),o=r[0],i=r[1];return Object(s.useEffect)((function(){var e=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:(t=e.sent).success&&a(t.data.posts),i(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),o?Object(b.jsx)(Z,{}):Object(b.jsx)("div",{className:E.a.postsList,children:n.map((function(e){return Object(b.jsx)("div",{className:E.a.postWrapper,children:Object(b.jsxs)("div",{className:E.a.postHeader,children:[Object(b.jsxs)("div",{className:E.a.postAvatar,children:[Object(b.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/428/428933.png",alt:"user-pic"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:E.a.postAuthor,children:e.user.name}),Object(b.jsx)("span",{className:E.a.postTime,children:"a minute ago"})]})]}),Object(b.jsx)("div",{className:E.a.postContent,children:e.conent}),Object(b.jsxs)("div",{className:E.a.postActions,children:[Object(b.jsxs)("div",{className:E.a.postLike,children:[Object(b.jsx)("img",{src:"https://cdn-icons.flaticon.com/png/512/880/premium/880452.png?token=exp=1641282447~hmac=b37b55bdc9571857f5db95475ae7e2d7",alt:"likes-icon"}),Object(b.jsx)("span",{children:"5"})]}),Object(b.jsxs)("div",{className:E.a.postCommentsIcon,children:[Object(b.jsx)("img",{src:"https://cdn-icons.flaticon.com/png/512/2593/premium/2593491.png?token=exp=1641282274~hmac=cb47d954e1d2bccd0e1b5e9df59c5558",alt:"comments-icon"}),Object(b.jsx)("span",{children:e.comments.length})]})]}),Object(b.jsx)("div",{className:E.a.postCommentBox,children:Object(b.jsx)("input",{placeholder:"Start typing a comment"})}),Object(b.jsx)("div",{className:E.a.postCommentsList,children:e.comments.map((function(e){return Object(b.jsx)(Y,{comment:e})}))})]})},"post-".concat(e._id))}))})},F=n(10),R=n.n(F),G=function(){var e=Object(s.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(""),r=Object(m.a)(c,2),i=r[0],l=r[1],u=Object(s.useState)(!1),p=Object(m.a)(u,2),h=p[0],O=p[1],f=Object(o.useToasts)().addToast,x=P();console.log(x);var v=function(){var e=Object(d.a)(j.a.mark((function e(t){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),O(!0),n&&i){e.next=4;break}return e.abrupt("return",f("Please enter both email and password",{appearance:"error"}));case 4:return e.next=6,x.login(n,i);case 6:(s=e.sent).success?f("Successfully logged in",{appearance:"success"}):f(s.message,{appearance:"error"}),O(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("form",{className:R.a.loginForm,onSubmit:v,children:[Object(b.jsx)("span",{className:R.a.loginSignupHeader,children:"Log In"}),Object(b.jsx)("div",{className:R.a.field,children:Object(b.jsx)("input",{type:"email",placeholder:"Email",value:n,onChange:function(e){return a(e.target.value)}})}),Object(b.jsx)("div",{className:R.a.field,children:Object(b.jsx)("input",{type:"password",placeholder:"Paasword",value:i,onChange:function(e){return l(e.target.value)}})}),Object(b.jsx)("div",{className:R.a.field,children:Object(b.jsx)("button",{disabled:h,children:h?"Logging in...":"Log In"})})]})},U=function(){var e=Object(s.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(""),r=Object(m.a)(c,2),i=r[0],u=r[1],p=Object(s.useState)(""),h=Object(m.a)(p,2),O=h[0],f=h[1],x=Object(s.useState)(""),v=Object(m.a)(x,2),g=v[0],_=v[1],C=Object(s.useState)(""),N=Object(m.a)(C,2),w=N[0],S=N[1],k=Object(o.useToasts)().addToast,L=P(),y=Object(l.f)(),I=function(){var e=Object(d.a)(j.a.mark((function e(t){var s,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),S(!0),s=!1,n&&i&&O&&g||(k("Please fill all the fields",{appearance:"error",autoDismiss:!0}),s=!0),O!==g&&(k("Make sure password and confirm password matches",{appearance:"error",autoDismiss:!0}),s=!0),!s){e.next=7;break}return e.abrupt("return",S(!1));case 7:return e.next=9,L.signup(n,i,O,g);case 9:if(!(a=e.sent).success){e.next=16;break}return y.push("/login"),S(!1),e.abrupt("return",k("User registered successfully, please login now",{appearance:"success",autoDismiss:!0}));case 16:k(a.message,{appearance:"error",autoDismiss:!0});case 17:S(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("form",{className:R.a.loginForm,onSubmit:I,children:[Object(b.jsx)("span",{className:R.a.loginSignupHeader,children:" Signup"}),Object(b.jsx)("div",{className:R.a.field,children:Object(b.jsx)("input",{placeholder:"Name",type:"text",required:!0,value:n,onChange:function(e){return a(e.target.value)},autoComplete:"new-password"})}),Object(b.jsx)("div",{className:R.a.field,children:Object(b.jsx)("input",{placeholder:"Email",type:"email",value:i,onChange:function(e){return u(e.target.value)},autoComplete:"new-password"})}),Object(b.jsx)("div",{className:R.a.field,children:Object(b.jsx)("input",{placeholder:"Confirm password",type:"password",required:!0,value:O,onChange:function(e){return f(e.target.value)}})}),Object(b.jsx)("div",{className:R.a.field,children:Object(b.jsx)("input",{placeholder:"Password",type:"password",required:!0,value:g,onChange:function(e){return _(e.target.value)}})}),Object(b.jsx)("div",{className:R.a.field,children:Object(b.jsx)("button",{disabled:w,children:w?"Signing up...":"Signup"})})]})},q=n(8),J=n.n(q),W=function(){var e,t,n,a=P(),c=Object(s.useState)(!1),r=Object(m.a)(c,2),o=r[0],i=r[1],l=Object(s.useState)((null===(e=a.user)||void 0===e?void 0:e.name)?a.user.name:""),u=Object(m.a)(l,2),j=u[0],d=u[1],p=Object(s.useState)(""),h=Object(m.a)(p,2),O=h[0],f=h[1],x=Object(s.useState)(""),v=Object(m.a)(x,2),g=v[0],_=v[1],C=Object(s.useState)(!1),N=Object(m.a)(C,2),w=N[0];N[1];return Object(b.jsxs)("div",{className:J.a.settings,children:[Object(b.jsx)("div",{className:J.a.imgContainer,children:Object(b.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/428/428933.png",alt:""})}),Object(b.jsxs)("div",{className:J.a.field,children:[Object(b.jsx)("div",{className:J.a.fieldLabel,children:"Email"}),Object(b.jsx)("div",{className:J.a.fieldValue,children:null===(t=a.user)||void 0===t?void 0:t.email})]}),Object(b.jsxs)("div",{className:J.a.field,children:[Object(b.jsx)("div",{className:J.a.fieldLabel,children:"Name"}),o?Object(b.jsx)("input",{type:"text",value:j,onChange:function(e){return d(e.target.value)}}):Object(b.jsx)("div",{className:J.a.fieldValue,children:null===(n=a.user)||void 0===n?void 0:n.email})]}),o&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:J.a.field,children:[Object(b.jsx)("div",{className:J.a.fieldLabel,children:"Password"}),Object(b.jsx)("input",{type:"password",value:O,onChange:function(e){return f(e.target.value)}})]}),Object(b.jsxs)("div",{className:J.a.field,children:[Object(b.jsx)("div",{className:J.a.fieldLabel,children:"Confirm Password"}),Object(b.jsx)("input",{type:"password",value:g,onChange:function(e){return _(e.target.value)}})]})]}),Object(b.jsx)("div",{className:J.a.btnGrp,children:o?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"button ".concat(J.a.saveBtn),onClick:function(){},children:w?"Saving profile...":"Save profile"}),Object(b.jsx)("button",{className:"button ".concat(J.a.editBtn),onClick:function(){return i(!1)},children:"Go back"})]}):Object(b.jsx)("button",{className:"button ".concat(J.a.editBtn),onClick:function(){return i(!0)},children:"Edit Profile"})})]})},M=function(){return Object(b.jsx)("h1",{children:"404"})};var V=function(){return P().loading?Object(b.jsx)(Z,{}):Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(i.a,{children:[Object(b.jsx)(X,{}),Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{exact:!0,path:"/",children:Object(b.jsx)(H,{})}),Object(b.jsx)(l.a,{exact:!0,path:"/login",children:Object(b.jsx)(G,{})}),Object(b.jsx)(l.a,{exact:!0,path:"/register",children:Object(b.jsx)(U,{})}),Object(b.jsx)(l.a,{exact:!0,path:"/settings",children:Object(b.jsx)(W,{})}),Object(b.jsx)(l.a,{children:Object(b.jsx)(M,{})})]})]})})},Z=function(){return Object(b.jsx)("div",{className:"app-spinner"})},Q=n(17),z=n.n(Q),X=function(){var e=P();return Object(b.jsxs)("div",{className:z.a.nav,children:[Object(b.jsx)("div",{className:z.a.leftDiv,children:Object(b.jsx)(i.b,{to:"/",children:Object(b.jsx)("img",{alt:"",src:"https://ninjasfiles.s3.amazonaws.com/0000000000003454.png"})})}),Object(b.jsxs)("div",{className:z.a.rightNav,children:[e.user&&Object(b.jsxs)("div",{className:z.a.user,children:[Object(b.jsx)(i.b,{to:"/settings",children:Object(b.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/428/428933.png",alt:"",className:z.a.userDp})}),Object(b.jsx)("span",{children:e.user.name})]}),Object(b.jsx)("div",{className:z.a.navLinks,children:Object(b.jsx)("ul",{children:e.user?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("li",{onClick:e.logout,children:"Log out"})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{children:Object(b.jsx)(i.b,{to:"/login",children:"Log in"})}),Object(b.jsx)("li",{children:Object(b.jsx)(i.b,{to:"/register",children:"Register"})})]})})})]})]})},Y=function(e){var t=e.comment;return Object(b.jsxs)("div",{className:E.a.postCommentsItem,children:[Object(b.jsxs)("div",{className:E.a.postCommentHeader,children:[Object(b.jsx)("span",{className:E.a.postCommentAuthor,children:t.user.name}),Object(b.jsx)("span",{className:E.a.postCommentTime,children:"a minute ago"}),Object(b.jsx)("span",{className:E.a.postCommentLikes,children:"22"})]}),Object(b.jsx)("div",{className:E.a.postCommentContent,children:t.content})]})};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(o.ToastProvider,{autoDismiss:!0,autoDismissTimeout:5e3,placement:"top-left",children:Object(b.jsx)(f,{children:Object(b.jsx)(V,{})})})}),document.getElementById("root"))},6:function(e,t,n){e.exports={postWrapper:"home_postWrapper__2W83w",postHeader:"home_postHeader__3I5W3",postAvatar:"home_postAvatar__26dNY",postAuthor:"home_postAuthor___rGP3",postTime:"home_postTime__2xL8s",postContent:"home_postContent__lbgnU",postActions:"home_postActions__2VE0Y",postLike:"home_postLike__1_VbU",postCommentsIcon:"home_postCommentsIcon__UgJfp",postCommentBox:"home_postCommentBox__1rB8B",postCommentsList:"home_postCommentsList__5djCC",postCommentItem:"home_postCommentItem__2uyLS",postCommentHeader:"home_postCommentHeader__1umgJ",postCommentAuthor:"home_postCommentAuthor__1X_f7",postCommentTime:"home_postCommentTime__3u37r",postCommentLikes:"home_postCommentLikes__ACm2x",postCommentContent:"home_postCommentContent__PoSVN",commentLike:"home_commentLike__-L7mZ"}},8:function(e,t,n){e.exports={settings:"settings_settings__lZnH-",imgContainer:"settings_imgContainer__1ZisI",btnGrp:"settings_btnGrp__3OrnP",editBtn:"settings_editBtn__qbUC-",saveBtn:"settings_saveBtn__12JQM",goBack:"settings_goBack__1bGfO",field:"settings_field__2rr7v",fieldLabel:"settings_fieldLabel__3cmQB"}}},[[52,1,2]]]);
//# sourceMappingURL=main.dfea2ea4.chunk.js.map